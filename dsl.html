<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cfgfile: DSL for generation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cfgfile<span id="projectnumber">&#160;0.2.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dsl.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">DSL for generation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>To simplify development with cfgfile was implemented cfgfile generator.</p>
<p>cfgfile generator this is generator of C++ header file from declarative description of the configuration file. By configuration file assumes configuration file in cfgfile format. In generated header will be declared all necessary classes of data and configuration tags.</p>
<p>For generation generator uses input configuration file in cfgfile format with following format:</p>
<p>Let's say you need data class with one <code>std::string</code> field then you can write following configuration file, for example:</p>
<pre class="fragment">{forGeneration ifndefMacro
  {namespace NamespaceName
    {class NameOfTheClass
      {base tagNoValue}

      {tagScalar
        {valueType std::string}
        {name fieldWithString}
      }
    }
  }
}
</pre><p>Each configuration file for generator must has one <a class="el" href="dsl.html#forgen">{forGeneration} </a> tag and all nested tags must be defined in this tag. <a class="el" href="dsl.html#forgen">{forGeneration} </a> tag require string for <code>#ifndef</code> directive (include guard). There you can use <a class="el" href="dsl.html#namespace">{namespace} </a> tag for generation data classes and tags in the specified C++ namespace. Namespaces can be nested. To declare data class and tag you should use <a class="el" href="dsl.html#class">{class} </a> tag. <a class="el" href="dsl.html#class">{class} </a> tag can has <a class="el" href="dsl.html#base">{base} </a> tag to define base class of the configuration tag. <a class="el" href="dsl.html#base">{base} </a> tag can has following values: <code>tagNoValue</code>, <code>tagScalar</code>, <code>tagScalarVector</code>. <code>tagNoValue</code> is not mandatory in this case. To define field in data class you can use following tags: <a class="el" href="dsl.html#tagscalar">{tagScalar} </a> for scalar tag, <a class="el" href="dsl.html#tagnovalue">{tagNoValue} </a> for no-value tag, <a class="el" href="dsl.html#tagscalarvector">{tagScalarVector} </a> for vector of scalar values, <a class="el" href="dsl.html#tag">{tag} </a> for already defined tag, <a class="el" href="dsl.html#tagvectoroftags">{tagVectorOfTags} </a> for vector of already defined tags.</p>
<p><a class="el" href="dsl.html#tagscalar">{tagScalar} </a>, <a class="el" href="dsl.html#tagscalarvector">{tagScalarVector} </a> require C++ type defined in <a class="el" href="dsl.html#valuetype">{valueType} </a> tag. In this situation C++ type should be defined as string, that mean that, for example, <code>unsigned</code> <code>int</code> C++ type should be declared as <code>"unsigned int"</code>.</p>
<p><a class="el" href="dsl.html#tag">{tag} </a> and <a class="el" href="dsl.html#tagvectoroftags">{tagVectorOfTags} </a> require class name with namespace if it is exist. Class name should be defined in <a class="el" href="dsl.html#valuetype">{valueType} </a> tag. Namespace and class name should be separated with <code>::</code> </p>
<p>All of field tags must have <a class="el" href="dsl.html#name">{name} </a> tag with name of the field as value. If <a class="el" href="dsl.html#base">{base} </a> defined with <code>tagScalar</code> or <code>tagScalarVector</code> then <a class="el" href="dsl.html#valuetype">{valueType} </a> and <a class="el" href="dsl.html#name">{name} </a> must be defined. <a class="el" href="dsl.html#base">{base tagNoValue} </a> is not necessary, if <a class="el" href="dsl.html#base">{base} </a> is not defined then <code>tagNoValue</code> will be used as base class.</p>
<p>Fields can have <a class="el" href="dsl.html#required">{required} </a> tag to mark field as required.</p>
<p>All of field tags can have <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a> or <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a> to define constraint for the field's value. <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a> require two tags <a class="el" href="dsl.html#min">{min} </a> and <a class="el" href="dsl.html#max">{max} </a>, and <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a> require list of values. For example, <code>{minMaxConstraint</code> <code>{min</code> <code>0}</code> <code>{max</code> <code>100}}</code>, <code>{oneOfConstraint</code> <code>one</code> <code>two</code> <code>three}</code>.</p>
<p><a class="el" href="dsl.html#base">{base} </a> and fields can have <a class="el" href="dsl.html#default">{defaultValue} </a> tag to specify default value.</p>
<p>In the above example will be generated similar to the following header file.</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>NamespaceName {</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>NameOfTheClass {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  c_tors();</div>
<div class="line">  ~d_tor();</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> std::string &amp; fieldWithString() <span class="keyword">const</span>;</div>
<div class="line">  <span class="keywordtype">void</span> set_fieldWithString( <span class="keyword">const</span> std::string &amp; value );</div>
<div class="line">}; <span class="comment">// class NameOfTheClass</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// tag_NameOfTheClass</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Trait &gt;</div>
<div class="line"><span class="keyword">class </span>tag_NameOfTheClass</div>
<div class="line">  :  <span class="keyword">public</span> <a class="code hl_class" href="classcfgfile_1_1tag__no__value__t.html">cfgfile::tag_no_value_t</a>&lt; Trait &gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  c_tors();</div>
<div class="line">  ~d_tor();</div>
<div class="line"> </div>
<div class="line">  NameOfTheClass get_cfg() <span class="keyword">const</span>;</div>
<div class="line">}; <span class="comment">// class tag_NameOfTheClass</span></div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace NamespaceName</span></div>
<div class="ttc" id="aclasscfgfile_1_1tag__no__value__t_html"><div class="ttname"><a href="classcfgfile_1_1tag__no__value__t.html">cfgfile::tag_no_value_t</a></div><div class="ttdoc">Tag without a value.</div><div class="ttdef"><b>Definition</b> tag_no_value.hpp:57</div></div>
</div><!-- fragment --><p>Additionally you can use custom data structures and tags in the generator. For this you can use <a class="el" href="dsl.html#globalinc">{globalInclude} </a> and <a class="el" href="dsl.html#relativeinc">{relativeInclude} </a> tags. When using such includes in C++ code will be added corresponding include directives. And checking of classes' and namespaces' names will be turned off. And one more restriction is that that class's name for tag must be equal to <code>tag_</code> <code>+</code> <code>Name</code>, i.e. if data structure names <code>Data</code> then class for tag must be named <code>tag_Data</code> and be placed in the same namespace as <code>Data</code> class/ structure.</p>
<h1><a class="anchor" id="details"></a>
Details</h1>
<h2><a class="anchor" id="forgen"></a>
{forGeneration}</h2>
<p>Syntax: </p><pre class="fragment">{forGeneration &lt;string&gt;} </pre><p>Root tag of the DSL. Requires string argument wich will be used as include guard in C++ header. In the C++ header include guard will be appended with <code>__INCLUDED</code>. In this tag should be defined all classes, namespaces.</p>
<p>Possible child tags are <a class="el" href="dsl.html#namespace">{namespace} </a>, <a class="el" href="dsl.html#class">{class} </a>, <a class="el" href="dsl.html#globalinc">{globalInclude} </a>, <a class="el" href="dsl.html#relativeinc">{relativeInclude} </a>.</p>
<h2><a class="anchor" id="globalinc"></a>
{globalInclude}</h2>
<p>Syntax: </p><pre class="fragment">{globalInclude &lt;string&gt;} </pre><p>Includes the give file in the C++ header with <code>&lt;</code> <code>&gt;</code>.</p>
<h2><a class="anchor" id="relativeinc"></a>
{relativeInclude}</h2>
<p>Syntax: </p><pre class="fragment">{relativeInclude &lt;string&gt;} </pre><p>Includes the given file in the C++ header with <code>"</code> <code>"</code>.</p>
<h2><a class="anchor" id="namespace"></a>
{namespace}</h2>
<p>Syntax: </p><pre class="fragment">{namespace &lt;string&gt;} </pre><p>Generates C++ namespace with the given name in the C++ header.</p>
<p>Possible child tags are <a class="el" href="dsl.html#namespace">{namespace} </a>, <a class="el" href="dsl.html#class">{class} </a>.</p>
<h2><a class="anchor" id="class"></a>
{class}</h2>
<p>Syntax: </p><pre class="fragment">{class &lt;string&gt;} </pre><p>Generates C++ classes for the data and tag with the given name. Name of the data class will be as given whereas name of the class for cfgfile tag will be prepended with <code>tag_</code> </p><dl class="section note"><dt>Note</dt><dd>Tag will be generated templated, so you can use this tag with any Trait.</dd></dl>
<p>Possible child tags are <a class="el" href="dsl.html#base">{base} </a>, <a class="el" href="dsl.html#tagscalar">{tagScalar} </a>, <a class="el" href="dsl.html#tagscalarvector">{tagScalarVector} </a>, <a class="el" href="dsl.html#tagnovalue">{tagNoValue} </a>, <a class="el" href="dsl.html#tagvectoroftags">{tagVectorOfTags} </a>, <a class="el" href="dsl.html#tag">{tag} </a>.</p>
<h2><a class="anchor" id="base"></a>
{base}</h2>
<p>Syntax: </p><pre class="fragment">{base tagNoValue|tagScalar|tagScalarVector} </pre><p>Defines base class for the tag for the data class. This tag is not mandatory, if not defined then <code>{base</code> <code>tagNoValue}</code> will be used that mean that base class of the tag will be <code><a class="el" href="classcfgfile_1_1tag__no__value__t.html" title="Tag without a value.">cfgfile::tag_no_value_t</a></code>.</p>
<p>If value of the tag is <code>tagScalar</code> then <code><a class="el" href="classcfgfile_1_1tag__scalar__t.html" title="Tag with scalar value.">cfgfile::tag_scalar_t</a></code> will be used as base class.</p>
<p>If value of the tag is <code>tagScalarVector</code> then <code><a class="el" href="classcfgfile_1_1tag__scalar__vector__t.html" title="Tag with multiple scalar values.">cfgfile::tag_scalar_vector_t</a></code> will be used as base class.</p>
<p>Possible child tags are <a class="el" href="dsl.html#name">{name} </a>, <a class="el" href="dsl.html#valuetype">{valueType} </a>, <a class="el" href="dsl.html#default">{defaultValue} </a>, <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a>, <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a>.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="dsl.html#valuetype">{valueType} </a>, <a class="el" href="dsl.html#default">{defaultValue} </a>, <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a>, <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a> tags are in use only with <code>tagScalar</code> and <code>tagScalarVector</code> values.</dd></dl>
<h2><a class="anchor" id="valuetype"></a>
{valueType}</h2>
<p>Syntax: </p><pre class="fragment">{valueType &lt;string&gt;} </pre><p>Defines C++ type of the value. </p><dl class="section note"><dt>Note</dt><dd>If C++ type contains spaces then use quotes to define value, for example, <code>"unsigned</code> <code>int"</code>.</dd></dl>
<h2><a class="anchor" id="default"></a>
{defaultValue}</h2>
<p>Syntax: </p><pre class="fragment">{defaultValue &lt;value&gt;} </pre><p>Defines default value for the tag. DSL reads value as string but generator makes substitution as is. For example, if C++ type <code>int</code> then default value can be defined as <code>{defaultValue</code> <code>100}</code>. If, for example, C++ type of the value is <code>QString</code> then default value can be defined as <code>{defaultValue</code> <code>"\"value\""}</code>.</p>
<dl class="section note"><dt>Note</dt><dd>Possible situations when C++ type of the value is <code>std::vector</code>, in this situation default value will be substituted as arguments of constructor of <code>std::vector</code>. You should care about it. For <code>std::vector</code> you can pass <code>std::initializer_list</code>, for example, or use two arguments for the constructor of <code>std::vector</code>, where first will be count of elements and second - value.</dd></dl>
<h2><a class="anchor" id="minmax"></a>
{minMaxConstraint}</h2>
<p>Syntax: </p><pre class="fragment">{minMaxConstraint {min &lt;value&gt;} {max &lt;value&gt;}} </pre><p>Defines min-max constraint for the tag.</p>
<p>Required child tags are <a class="el" href="dsl.html#min">{min} </a>, <a class="el" href="dsl.html#max">{max} </a>.</p>
<h2><a class="anchor" id="min"></a>
{min}</h2>
<p>Syntax: </p><pre class="fragment">{min &lt;value&gt;} </pre><p>Defines minimum value of the constraint.</p>
<h2><a class="anchor" id="max"></a>
{max}</h2>
<p>Syntax: </p><pre class="fragment">{max &lt;value&gt;} </pre><p>Defines maximum value of the constraint.</p>
<h2><a class="anchor" id="oneof"></a>
{oneOfConstraint}</h2>
<p>Syntax: </p><pre class="fragment">{oneOfConstraint &lt;list of values&gt;} </pre><p>Defines one-of constraint for the tag.</p>
<dl class="section note"><dt>Note</dt><dd>If underlying C++ type is string you should quote each value as <code>"\"value\""</code>. Values are separated with space.</dd></dl>
<h2><a class="anchor" id="tagscalar"></a>
{tagScalar}</h2>
<p>Syntax: </p><pre class="fragment">{tagScalar} </pre><p>Defines member/field in the data/tag with type of <a class="el" href="classcfgfile_1_1tag__scalar__t.html" title="Tag with scalar value.">cfgfile::tag_scalar_t</a> in the tag with underlying C++ type defined in <a class="el" href="dsl.html#valuetype">{valueType} </a>.</p>
<p>Required tags are <a class="el" href="dsl.html#valuetype">{valueType} </a>, <a class="el" href="dsl.html#name">{name} </a>.</p>
<p>Optional tags are <a class="el" href="dsl.html#required">{required} </a>, <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a>, <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a>, <a class="el" href="dsl.html#default">{defaultValue} </a>.</p>
<h2><a class="anchor" id="name"></a>
{name}</h2>
<p>Syntax: </p><pre class="fragment">{name &lt;string&gt;} </pre><p>Defines name for the data member, tag name. In data class name is in use for generating getter/setter members name for the value. Name of the getter member will be as is whereas name of the setter will be prepended with set_ In the configuration file tag will have the given name as name/tag.</p>
<p>For example if you define <code>{name</code> <code>my_value}</code> then:</p>
<p>in data class you will have three methods:</p>
<div class="fragment"><div class="line">Type &amp; my_value();</div>
<div class="line"><span class="keyword">const</span> Type &amp; my_value() <span class="keyword">const</span>;</div>
<div class="line"><span class="keywordtype">void</span> set_my_value( <span class="keyword">const</span> Type &amp; value );</div>
</div><!-- fragment --><p>and in configuration file you will have tag:</p>
<pre class="fragment">{my_value} </pre><h2><a class="anchor" id="required"></a>
{required}</h2>
<p>Syntax: </p><pre class="fragment">{required} </pre><p>Marks tag as required in the generated configuration.</p>
<h2><a class="anchor" id="tagscalarvector"></a>
{tagScalarVector}</h2>
<p>Syntax: </p><pre class="fragment">{tagScalarVector} </pre><p>Defines member/field in the data/tag with type of <a class="el" href="classcfgfile_1_1tag__scalar__vector__t.html" title="Tag with multiple scalar values.">cfgfile::tag_scalar_vector_t</a> in the tag with underlying C++ type defined in <a class="el" href="dsl.html#valuetype">{valueType} </a>.</p>
<p>Required tags are <a class="el" href="dsl.html#valuetype">{valueType} </a>, <a class="el" href="dsl.html#name">{name} </a>.</p>
<p>Optional tags are <a class="el" href="dsl.html#required">{required} </a>, <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a>, <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a>, <a class="el" href="dsl.html#default">{defaultValue} </a>.</p>
<h2><a class="anchor" id="tagnovalue"></a>
{tagNoValue}</h2>
<p>Syntax: </p><pre class="fragment">{tagNoValue} </pre><p>Defines member/field in the data/tag with type of <a class="el" href="classcfgfile_1_1tag__no__value__t.html" title="Tag without a value.">cfgfile::tag_no_value_t</a> in the tag.</p>
<p>Required tag is <a class="el" href="dsl.html#name">{name} </a>.</p>
<p>Optional tag is <a class="el" href="dsl.html#required">{required} </a>.</p>
<h2><a class="anchor" id="tagvectoroftags"></a>
{tagVectorOfTags}</h2>
<p>Syntax: </p><pre class="fragment">{tagVectorOfTags} </pre><p>Defines member/field in the data/tag with type of <a class="el" href="classcfgfile_1_1tag__vector__of__tags__t.html" title="Tag with multiple instancies of the given tag.">cfgfile::tag_vector_of_tags_t</a> in the tag with underlying type defined in <a class="el" href="dsl.html#valuetype">{valueType} </a>.</p>
<dl class="section note"><dt>Note</dt><dd>Underlying type should be defined in "this" configuration for the generator or should be included with <a class="el" href="dsl.html#globalinc">{globalInclude} </a> or <a class="el" href="dsl.html#relativeinc">{relativeInclude} </a> tags, i.e. child tag can be defined by user in the C++ header or can be previously generated. Type should be defined with all namespaces.</dd></dl>
<p>Required tags are <a class="el" href="dsl.html#valuetype">{valueType} </a>, <a class="el" href="dsl.html#name">{name} </a>.</p>
<p>Optional tags are <a class="el" href="dsl.html#required">{required} </a>, <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a>, <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a>, <a class="el" href="dsl.html#default">{defaultValue} </a>.</p>
<h2><a class="anchor" id="tag"></a>
{tag}</h2>
<p>Syntax: </p><pre class="fragment">{tag} </pre><p>Defines member/field in the data/tag with type of tag defined in <a class="el" href="dsl.html#valuetype">{valueType} </a>.</p>
<dl class="section note"><dt>Note</dt><dd>Type should be defined with all namespaces.</dd></dl>
<p>Required tags are <a class="el" href="dsl.html#valuetype">{valueType} </a>, <a class="el" href="dsl.html#name">{name} </a>.</p>
<p>Optional tags are <a class="el" href="dsl.html#required">{required} </a>, <a class="el" href="dsl.html#oneof">{oneOfConstraint} </a>, <a class="el" href="dsl.html#minmax">{minMaxConstraint} </a>, <a class="el" href="dsl.html#default">{defaultValue} </a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
