<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>cfgfile: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cfgfile
   &#160;<span id="projectnumber">0.2.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cfgfile Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>cfgfile - is a header-only library for reading/saving configuration files.The main approach of cfgfile that you define root tag of configuration with all neseccary child nested tags. Once you define hierarchy of tags that describes the schema of your configuration you can read and save configuration files from/to any supported stream. cfgfile supports std::istream, std::wistream and QTextStream for reading. Tag in the schema is a class derived from cfgfile::tag_t&lt; Trait &gt; or any ready to use derived classes. To simplify a life you can use generator to generate C++ classed of data and tags with DSL.</p>
<p>Let's say you have data structure representing configuration of your application.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>data_t {</div><div class="line">  std::string m_value;</div><div class="line">};</div></div><!-- fragment --><p>And you want to save this structure in the following format.</p>
<div class="fragment"><div class="line">{data</div><div class="line">    {value &lt;string&gt;}</div><div class="line">}</div></div><!-- fragment --><p>Then you can define tag for cfgfile to read and save such configuration file.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> Trait &gt;</div><div class="line"><span class="keyword">class </span>tag_data_t</div><div class="line">  :  <span class="keyword">public</span> <a class="code" href="classcfgfile_1_1tag__no__value__t.html">cfgfile::tag_no_value_t</a>&lt; Trait &gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  tag_data_t()</div><div class="line">    :  <a class="code" href="namespacecfgfile.html">cfgfile</a>::tag_no_value_t&lt; Trait &gt; ( <span class="stringliteral">&quot;data&quot;</span>, true )</div><div class="line">    ,  m_value( *this, <span class="stringliteral">&quot;value&quot;</span>, true )</div><div class="line">  {}</div><div class="line"></div><div class="line">  tag_data_t( <span class="keyword">const</span> data_t &amp; cfg )</div><div class="line">    :  <a class="code" href="namespacecfgfile.html">cfgfile</a>::tag_no_value_t&lt; Trait &gt; ( <span class="stringliteral">&quot;data&quot;</span>, true )</div><div class="line">    ,  m_value( *this, <span class="stringliteral">&quot;value&quot;</span>, true )</div><div class="line">  {</div><div class="line">    m_value.set_value( cfg.m_value );</div><div class="line"></div><div class="line">    <a class="code" href="classcfgfile_1_1tag__t.html#a2a0496bb1cff31c335e91c5faf3cedcb">set_defined</a>();</div><div class="line">  }</div><div class="line"></div><div class="line">  data_t cfg()<span class="keyword"> const</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    data_t d;</div><div class="line">    d.m_value = m_value.value();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> d;</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <a class="code" href="classcfgfile_1_1tag__scalar__t.html">cfgfile::tag_scalar_t&lt; std::string, Trait &gt;</a> m_value;</div><div class="line">};</div></div><!-- fragment --><p>Once you defined data structure and tag you can read and write configuration.</p>
<div class="fragment"><div class="line">data_t cfg;</div><div class="line">cfg.m_value = <span class="stringliteral">&quot;value&quot;</span>;</div><div class="line"></div><div class="line">std::ofstream stream( <span class="stringliteral">&quot;conf.cfg&quot;</span> );</div><div class="line"></div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  tag_data_t&lt; cfgfile::string_trait_t &gt; tag( cfg );</div><div class="line"></div><div class="line">  cfgfile::write_cfgfile( tag, stream );</div><div class="line"></div><div class="line">  stream.close();</div><div class="line">}</div><div class="line"><span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code" href="classcfgfile_1_1exception__t.html">cfgfile::exception_t&lt; cfgfile::string_trait_t &gt;</a> &amp; x )</div><div class="line">{</div><div class="line">  stream.close();</div><div class="line"></div><div class="line">  std::cout &lt;&lt; x.<a class="code" href="classcfgfile_1_1exception__t.html#a5f76943794528ed1f3bf60466df2b0bb">desc</a>() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><p>And</p>
<div class="fragment"><div class="line">data_t cfg;</div><div class="line"></div><div class="line">std::ifstream stream( <span class="stringliteral">&quot;conf.cfg&quot;</span> );</div><div class="line"></div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  tag_data_t&lt; cfgfile::string_trait_t &gt; tag;</div><div class="line"></div><div class="line">  cfgfile::read_cfgfile( tag, stream, <span class="stringliteral">&quot;conf.cfg&quot;</span> );</div><div class="line"></div><div class="line">  stream.close();</div><div class="line"></div><div class="line">  cfg = tag.cfg();</div><div class="line">}</div><div class="line"><span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code" href="classcfgfile_1_1exception__t.html">cfgfile::exception_t&lt; cfgfile::string_trait_t &gt;</a> &amp; x )</div><div class="line">{</div><div class="line">  stream.close();</div><div class="line"></div><div class="line">  std::cout &lt;&lt; x.<a class="code" href="classcfgfile_1_1exception__t.html#a5f76943794528ed1f3bf60466df2b0bb">desc</a>() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
